#
# DO NOT EDIT THIS FILE MANUALLY
# This makefile was automatically generated
# Directory : lasi
# Package   : Linear Algebra Subroutine Interfaces
# Version   : 1.2.2
# Authors   : Andrea Ferretti
#
# Today is Thu Jan 26 19:51:15 CET 2012
#
# Global OPTIONS file has been used in generation
# Local OPTIONS file has been used in generation
#
# Sources defined by: *.f90 *.c *.f
#
# List of MAIN source files
# (Fortran files containing a program statement):
# test1.f90 
#
# List of LIB source files
# (Fortran files NOT containing a program statement and c files):
#  lasi_module.f90 
#
# Used libraries
# blas lapack
#
# Linked libraries
#
#
# The real Makefile starts here
#
# IDE HOME variable set to DEFAULT
IDEHOME=../..
#
# Objects to be linked in the library
OBJ_LIB= lasi_module.o

#

# Macros to link the present library
# (may be change by make.sys to the path of installed library)
LIB_LASI=liblasi.a
LIB_LASI_INCLUDE=-I. -I$(IDEHOME)/lasi/include

# Switch to enable actual compilation
# (may be change by make.sys to "external")
LIB_LASI_SWITCH=internal
# Options to link the LAPACK library
LIB_LAPACK=$(IDEHOME)/lapack/src/liblapack.a
LIB_LAPACK_INCLUDE=-I$(IDEHOME)/lapack/src/   -I$(IDEHOME)/lapack/include

# Options to link the BLAS library
LIB_BLAS=$(IDEHOME)/blas/src/libblas.a
LIB_BLAS_INCLUDE=-I$(IDEHOME)/blas/src/   -I$(IDEHOME)/blas/include

# Path for include
AUTO_INCLUDE=$(LIB_LASI_INCLUDE) $(LIB_LAPACK_INCLUDE) $(LIB_BLAS_INCLUDE) 

# List of used library files
AUTO_LIBS=$(LIB_LASI) $(LIB_LAPACK) $(LIB_BLAS) 
# Inclusion of system dependent files
include $(IDEHOME)/make.sys
# Macro (re)definitions from OPTIONS file (keyword DEFINITION)
PRECISION = $(FAUTODBL)

# specific FLAGS for LASI lib
# redefine the optimization level
OFLAGS = $(OFLAGS_NOOPT) 

# avoid problems in compilation if 
# autodouble is set
PRECISION=

# Main target
# INFO print a short help
info:
	@make print_info
# INFO make local library and all executables
all:
	make loclib
	make test1.x

# INFO make local library
loclib: libs loclib_only

loclib_only: ide_$(LIB_LASI_SWITCH)

ide_internal: liblasi.a

ide_external: fake_external.a

fake_external.a:
	touch $(OBJ_LIB)
	touch liblasi.a
	touch fake_external.a
# Targets for executables
# INFO make program test1.x
test1.x: test1.o liblasi.a $(IDEHOME)/lapack/src/liblapack.a $(IDEHOME)/blas/src/libblas.a
	make loclib_only
	$(LD) $(LDFLAGS) -o test1.x test1.o $(LIBOBJS) $(LIBS)
	cd $(IDEHOME)/lasi/bin ;   ln -sf $(IDEHOME)/lasi/src/test1.x . 


# Targets for libraries
# INFO make local library (without the used libraries)
liblasi.a: $(OBJ_LIB)
	$(AR) $(ARFLAGS) liblasi.a $(OBJ_LIB)
	$(RANLIB) liblasi.a

# INFO make all the used libs
libs:
	cd $(IDEHOME)/blas/src ; make loclib_only
	cd $(IDEHOME)/lapack/src ; make loclib_only


# target for making Makefile
# INFO make local Makefile
make: 
	cd $(IDEHOME) ; IDE/makemake.sh lasi 

# INFO make local and libs Makefiles
allmake:
	cd $(IDEHOME) ; IDE/makemake.sh blas 
	cd $(IDEHOME) ; IDE/makemake.sh lapack 
	cd $(IDEHOME) ; IDE/makemake.sh lasi 


# target for cleaning
clean_: clean
# INFO cleanup
clean: 
	- rm -f *.a *.o *.mod *.d *.pc *.pcl *.x *.F90
	if test -d  $(IDEHOME)/lasi/tmp/CVS  ; then \
	mv  $(IDEHOME)/lasi/tmp/CVS \
	$(IDEHOME)/lasi/tmp/.CVS ; fi
	- rm -rf $(IDEHOME)/lasi/tmp/*
	if test -d  $(IDEHOME)/lasi/tmp/.CVS  ; then \
	mv  $(IDEHOME)/lasi/tmp/.CVS  \
	$(IDEHOME)/lasi/tmp/CVS ; fi
	- rm -f $(IDEHOME)/lasi/bin/*.x 

tarlist: 
	cd $(IDEHOME) ; IDE/tarlist.sh lasi > lasi/tmp/tarlist

# INFO gzipped tar
tar: tarlist
	cd $(IDEHOME) ;         tar cf lasi-1.2.2.tar `cat lasi/tmp/tarlist`
	cd $(IDEHOME) ; gzip -9 lasi-1.2.2.tar

# INFO gzipped tar including used libraries and IDE
alltar: 
	cd $(IDEHOME) ;         tar cf lasi-1.2.2-withdeps.tar IDE CONFIG configure Makefile
	cd $(IDEHOME) ;         tar rf lasi-1.2.2-withdeps.tar OPTIONS
	cd $(IDEHOME) ;          tar rf lasi-1.2.2-withdeps.tar `cat lasi/tmp/tarlist`
	cd $(IDEHOME)/blas/src ; make tarlist
	cd $(IDEHOME) ; tar rf lasi-1.2.2-withdeps.tar `cat blas/tmp/tarlist`
	cd $(IDEHOME)/lapack/src ; make tarlist
	cd $(IDEHOME) ; tar rf lasi-1.2.2-withdeps.tar `cat lapack/tmp/tarlist`
	cd $(IDEHOME) ; gzip -9 lasi-1.2.2-withdeps.tar

# Directly added lines from OPTIONS file (keyword MAKEFILE)
# Nothing found
# Special rules for selected files (keyword DEFINITION.filebase)
# Nothing found

print_info:
	@echo " Package : Linear Algebra Subroutine Interfaces"
	@echo " Version : 1.2.2"
	@echo " Authors : Andrea Ferretti"
	@echo
	@echo " type:  make <target>"
	@echo " Possible <target>'s are:"
	@echo "  info                           print a short help"
	@echo "  all                            make local library and all executables"
	@echo "  loclib                         make local library"
	@echo "  test1.x                        make program test1.x"
	@echo "  liblasi.a                      make local library (without the used libraries)"
	@echo "  libs                           make all the used libs"
	@echo "  make                           make local Makefile"
	@echo "  allmake                        make local and libs Makefiles"
	@echo "  clean                          cleanup"
	@echo "  tar                            gzipped tar"
	@echo "  alltar                         gzipped tar including used libraries and IDE"
	@echo # Dependencies
lasi_module.o : ../include/lasi_config.h
test1.o : lasi_module.o
# End dependencies
